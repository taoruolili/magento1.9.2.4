<?php
/**
 * Magegiant
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magegiant.com license that is
 * available through the world-wide-web at this URL:
 * http://www.magegiant.com/license-agreement.html
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magegiant
 * @package     Magegiant_Onestepcheckout
 * @copyright   Copyright (c) 2014 Magegiant (http://www.magegiant.com/)
 * @license     http://www.magegiant.com/license-agreement.html
 */
?>
<?php if ($this->canShow()): ?>
    <?php if ($this->getHelperConfig()->isCoupon()): ?>
        <div class="block-wrapper">
            <div class="coupon-message-container" style="overflow:hidden;height:0px;"></div>
            <div class="coupon-code-form">
                <label for="coupon_code"><?php echo $this->__('Coupon Code') ?></label>

                <div class="input-box field-row">
                    <input type="text"
                           class="input-text<?php if ($this->getHelperConfig()->isApplyCouponButton()) : ?> with-buttons<?php endif; ?>"
                           id="coupon_code" name="coupon_code"
                           value="<?php echo $this->getCouponCode(); ?>"/>
                </div>
                <div class="ac-button">
                    <?php if ($this->getHelperConfig()->isApplyCouponButton()) : ?>
                        <button type="button" class="button" id="one-step-checkout-coupon-code-apply-btn"
                                onclick="return false;"<?php if ($this->getCouponCode()) : ?> style="display:none;"<?php endif; ?>>
                            <span><span><?php echo $this->__('Apply Coupon'); ?></span></span>
                        </button>
                        <button type="button" class="button" id="one-step-checkout-coupon-code-cancel-btn"
                                onclick="return false;"<?php if (!$this->getCouponCode()) : ?> style="display:none;"<?php endif; ?>>
                            <span><span><?php echo $this->__('Cancel Coupon'); ?></span></span>
                        </button>
                    <?php endif; ?>
                </div>
            </div>
        </div>
    <?php endif; ?>
<?php endif; ?>
<script>
    //<![CDATA[
    var giantOSCReviewCoupon = new MagegiantOnestepcheckoutReviewCoupon({
        couponContainer: '#one-step-checkout-review-coupon',
        couponInput: 'coupon_code',
        applyCouponUrl: '<?php echo $this->getApplyCouponAjaxUrl()?>',
        isAppliedCoupon: <?php echo $this->getCouponCode() ? 1 : 0; ?>,
        showApplyButton: <?php echo $this->getShowApplyButton()?1:0 ?>,
        applyCouponButton: '#one-step-checkout-coupon-code-apply-btn',
        cancelCouponButton: '#one-step-checkout-coupon-code-cancel-btn',
        messageContainer: '.coupon-message-container',
        errorClass: 'one-step-checkout-error-msg',
        successClass: 'one-step-checkout-success-msg'
    })
    //]]>
</script>